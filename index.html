<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detektif 100 Level - 100 Teka-Teki Unik</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #4e54c8;
            --secondary-color: #8f94fb;
            --text-color: #333;
            --bg-color: #f9f9f9;
            --card-bg: #ffffff;
            --shadow-color: rgba(0, 0, 0, 0.1);
            --choice-bg: #f0f4ff;
            --choice-hover: #e0e8ff;
            --timer-red: #ff4757;
        }

        .dark-mode {
            --primary-color: #6b75cb;
            --secondary-color: #4a4f8c;
            --text-color: #f0f0f0;
            --bg-color: #1a1a2e;
            --card-bg: #16213e;
            --shadow-color: rgba(0, 0, 0, 0.3);
            --choice-bg: #2a3b6a;
            --choice-hover: #344878;
            --timer-red: #ff6b81;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: background-color 0.3s, color 0.3s;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            background: linear-gradient(135deg, var(--bg-color) 0%, var(--card-bg) 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 15px 20px;
            background: var(--card-bg);
            border-radius: 15px;
            box-shadow: 0 5px 15px var(--shadow-color);
        }

        h1 {
            font-size: 2.2rem;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .theme-toggle, .level-select-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .theme-toggle:hover, .level-select-btn:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
        }

        .game-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px var(--shadow-color);
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .game-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        }

        .level-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            font-weight: bold;
            color: var(--primary-color);
            background: var(--choice-bg);
            padding: 12px 20px;
            border-radius: 10px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .timer-container {
            display: flex;
            align-items: center;
            gap: 5px;
            color: var(--timer-red);
            font-weight: bold;
        }

        .character-container {
            text-align: center;
            margin: 25px 0;
            perspective: 1000px;
        }

        .character {
            font-size: 6rem;
            display: inline-block;
            animation: float 3s ease-in-out infinite;
            filter: drop-shadow(0 5px 15px rgba(0, 0, 0, 0.2));
            transform-style: preserve-3d;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotateY(0deg); }
            50% { transform: translateY(-10px) rotateY(10deg); }
        }

        .story {
            margin-bottom: 30px;
            font-size: 1.1rem;
            text-align: justify;
            line-height: 1.8;
            background: var(--choice-bg);
            padding: 20px;
            border-radius: 15px;
            border-left: 4px solid var(--primary-color);
        }

        .clue-container {
            background: var(--choice-bg);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 3px solid var(--secondary-color);
        }

        .clue-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
            font-weight: bold;
            color: var(--primary-color);
        }

        .choices {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            margin-top: 20px;
        }

        .choice-btn {
            padding: 15px;
            background: var(--choice-bg);
            color: var(--text-color);
            border: 2px solid var(--primary-color);
            border-radius: 12px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s;
            text-align: left;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .choice-btn:hover {
            background: var(--choice-hover);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px var(--shadow-color);
        }

        .choice-btn i {
            color: var(--primary-color);
            font-size: 1.2rem;
        }

        .progress-container {
            margin: 30px 0;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .progress-bar {
            width: 100%;
            height: 12px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            border-radius: 10px;
            width: 1%;
            transition: width 0.5s ease;
        }

        .instructions {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            margin-top: 30px;
            box-shadow: 0 5px 20px var(--shadow-color);
            border-left: 4px solid var(--secondary-color);
        }

        .instructions h2 {
            margin-bottom: 20px;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .instructions ol {
            padding-left: 20px;
        }

        .instructions li {
            margin-bottom: 15px;
            line-height: 1.6;
        }

        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid var(--primary-color);
            color: var(--primary-color);
            font-size: 0.9rem;
        }

        .level-badge {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 5px 15px;
            border-radius: 50px;
            font-size: 0.9rem;
        }

        .result-message {
            text-align: center;
            padding: 20px;
            margin-top: 20px;
            border-radius: 15px;
            font-weight: bold;
            display: none;
        }

        .success {
            background-color: #d4edda;
            color: #155724;
            border: 2px solid #c3e6cb;
        }

        .failure {
            background-color: #f8d7da;
            color: #721c24;
            border: 2px solid #f5c6cb;
        }

        .hint-btn {
            background: var(--secondary-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            margin-top: 10px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .lives-container {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .life {
            color: #ff4757;
            font-size: 1.2rem;
        }

        /* Modal Input Nama */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            width: 90%;
            max-width: 500px;
            text-align: center;
        }

        .modal-content h2 {
            margin-bottom: 20px;
            color: var(--primary-color);
        }

        .modal-content p {
            margin-bottom: 20px;
            color: #666;
        }

        .name-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            margin-bottom: 20px;
            transition: border-color 0.3s;
        }

        .name-input:focus {
            border-color: var(--primary-color);
            outline: none;
        }

        .start-button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: background 0.3s;
        }

        .start-button:hover {
            background: var(--secondary-color);
        }

        .save-indicator {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: var(--primary-color);
            color: white;
            padding: 10px 15px;
            border-radius: 5px;
            font-size: 0.9rem;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 100;
        }

        .save-indicator.show {
            opacity: 1;
        }

        /* Modal Pilih Level */
        .level-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            display: none;
        }

        .level-modal-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .level-modal-content h2 {
            margin-bottom: 20px;
            color: var(--primary-color);
            text-align: center;
        }

        .levels-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
            gap: 10px;
            margin-top: 20px;
        }

        .level-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            width: 60px;
            height: 60px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            font-size: 1.2rem;
        }

        .level-btn:hover {
            background: var(--secondary-color);
            transform: translateY(-3px);
        }

        .level-btn.locked {
            background: #ccc;
            cursor: not-allowed;
        }

        .level-btn.current {
            background: #ff9900;
            box-shadow: 0 0 15px rgba(255, 153, 0, 0.5);
        }

        .level-btn.completed {
            background: #28a745;
        }

        .close-level-modal {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--primary-color);
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        @media (max-width: 768px) {
            .choices {
                grid-template-columns: 1fr;
            }
            
            .character {
                font-size: 4rem;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .header-buttons {
                width: 100%;
                justify-content: center;
                display: flex;
                gap: 10px;
                flex-wrap: wrap;
            }
            
            .level-info {
                flex-direction: column;
                align-items: center;
            }
            
            .save-indicator {
                bottom: 10px;
                left: 10px;
                right: 10px;
                text-align: center;
            }
            
            .levels-grid {
                grid-template-columns: repeat(5, 1fr);
            }
            
            .level-btn {
                width: 50px;
                height: 50px;
            }
        }
    </style>
</head>
<body>
    <!-- Modal Input Nama -->
    <div class="modal-overlay" id="nameModal">
        <div class="modal-content">
            <h2><i class="fas fa-user-secret"></i> Identitas Detektif</h2>
            <p>Masukkan nama detektif Anda untuk memulai misi rahasia!</p>
            <input type="text" class="name-input" id="agentNameInput" placeholder="Nama Detektif" maxlength="20">
            <button class="start-button" id="startButton">Mulai Misi</button>
        </div>
    </div>

    <!-- Save Indicator -->
    <div class="save-indicator" id="saveIndicator">
        <i class="fas fa-save"></i> Progress tersimpan
    </div>

    <!-- Modal Pilih Level -->
    <div class="level-modal" id="levelModal">
        <div class="level-modal-content">
            <h2><i class="fas fa-layer-group"></i> Pilih Level</h2>
            <button class="close-level-modal" id="closeLevelModal">
                <i class="fas fa-times"></i>
            </button>
            <div class="levels-grid" id="levelsGrid">
                <!-- Level buttons will be generated here -->
            </div>
        </div>
    </div>

    <div class="container">
        <header>
            <h1><i class="fas fa-search"></i> Detektif 100 Level</h1>
            <div class="header-buttons">
                <button class="level-select-btn" id="levelSelectBtn">
                    <i class="fas fa-layer-group"></i> Pilih Level
                </button>
                <button class="theme-toggle" id="themeToggle">
                    <span>Mode Gelap</span>
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </header>

        <div class="game-card">
            <div class="level-info">
                <span>Level: <span id="currentLevel">1</span>/100</span>
                <span>Skor: <span id="score">0</span></span>
                <span class="level-badge" id="levelDifficulty">Pemula</span>
                <div class="timer-container">
                    <i class="fas fa-clock"></i>
                    <span id="timer">60</span>s
                </div>
                <div class="lives-container">
                    <span>Nyawa: </span>
                    <span id="lives">❤️❤️❤️</span>
                </div>
            </div>

            <div class="progress-container">
                <div class="progress-label">
                    <span>Progress</span>
                    <span id="progressPercentage">1%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress" id="levelProgress"></div>
                </div>
            </div>

            <div class="character-container">
                <div class="character" id="character">🦊</div>
            </div>

            <div class="story" id="story">
                Seorang gadis berada di pemakaman ibunya. Dia bertemu dengan seorang pria baik yang dia tidak tahu yang juga ada di pemakaman dan mereka cocok. Dia sibuk di pemakaman dan tidak punya waktu untuk menanyakan nomor telepon si pria sebelum dia pergi. Dia berusaha sangat keras untuk melacaknya, tetapi tidak ada yang tahu siapa dia atau bagaimana menghubungi dia. Beberapa hari kemudian saudara perempuan si gadis meninggal dan polisi mencurigainya sebagai kasus pembunuhan. Siapa yang membunuh saudara perempuannya?
            </div>

            <div class="clue-container">
                <div class="clue-header">
                    <i class="fas fa-clue"></i>
                    <span>Petunjuk:</span>
                </div>
                <div id="clue">Pria yang ditemui di pemakaman adalah orang yang sama yang terlibat dalam kematian saudara perempuan.</div>
            </div>

            <div class="choices" id="choices">
                <button class="choice-btn" onclick="makeChoice(0)"><i class="fas fa-user"></i> Pria yang ditemui di pemakaman</button>
                <button class="choice-btn" onclick="makeChoice(1)"><i class="fas fa-user-friends"></i> Teman dekat keluarga</button>
                <button class="choice-btn" onclick="makeChoice(2)"><i class="fas fa-home"></i> Tetangga mereka</button>
                <button class="choice-btn" onclick="makeChoice(3)"><i class="fas fa-question"></i> Pembunuh bayaran</button>
            </div>

            <button class="hint-btn" onclick="showHint()">
                <i class="fas fa-lightbulb"></i> Butuh Petunjuk? (-5 poin)
            </button>

            <div id="resultMessage" class="result-message"></div>
        </div>

        <div class="instructions">
            <h2><i class="fas fa-info-circle"></i> Cara Bermain</h2>
            <ol>
                <li>Setiap level menampilkan teka-teki misteri yang berbeda</li>
                <li>Baca cerita dengan seksama dan pilih jawaban yang tepat</li>
                <li>Setiap pilihan akan mempengaruhi skor Anda</li>
                <li>Anda memiliki waktu terbatas untuk menyelesaikan setiap level</li>
                <li>Setiap level hanya boleh melakukan 3 kesalahan sebelum game over</li>
                <li>Progress game akan otomatis tersimpan</li>
                <li>Gunakan tombol mode gelap untuk mengubah tampilan sesuai kenyamanan mata Anda</li>
                <li>Tujuan utama: Selesaikan semua 100 level untuk menjadi Detektif Master!</li>
            </ol>
        </div>

        <footer>
            <p>&copy; 2025 Detektif 100 Level - Game Misteri Interaktif</p>
            <p>Temukan petunjuk, pecahkan misteri, dan jadi detektif terbaik!</p>
        </footer>
    </div>

    <script>
        // Data level dan karakter - 100 teka-teki misteri yang benar-benar berbeda
        const levels = [
            {
                level: 1,
                character: "🦊",
                story: "Seorang gadis berada di pemakaman ibunya. Dia bertemu dengan seorang pria baik yang dia tidak tahu yang juga ada di pemakaman dan mereka cocok. Dia sibuk di pemakaman dan tidak punya waktu untuk menanyakan nomor telepon si pria sebelum dia pergi. Dia berusaha sangat keras untuk melacaknya, tetapi tidak ada yang tahu siapa dia atau bagaimana menghubungi dia. Beberapa hari kemudian saudara perempuan si gadis meninggal dan polisi mencurigainya sebagai kasus pembunuhan. Siapa yang membunuh saudara perempuannya?",
                clue: "Pria yang ditemui di pemakaman adalah orang yang sama yang terlibat dalam kematian saudara perempuan.",
                choices: [
                    "Pria yang ditemui di pemakaman",
                    "Teman dekat keluarga",
                    "Tetangga mereka",
                    "Pembunuh bayaran"
                ],
                correctChoice: 0,
                difficulty: "Pemula",
                time: 60,
                success: "Benar! Pria yang ditemui di pemakaman adalah ayah kandung gadis itu. Dia membunuh saudara perempuan untuk bertemu lagi dengan gadis itu di pemakaman.",
                failure: "Salah! Coba pikirkan lagi siapa yang memiliki motif dan kesempatan.",
                hints: [
                    "Pria itu memiliki hubungan keluarga dengan gadis tersebut",
                    "Dia ingin bertemu lagi dengan gadis itu",
                    "Kematian saudara perempuan memberinya alasan untuk hadir di pemakaman lagi"
                ]
            },
            {
                level: 2,
                character: "🐱",
                story: "Seorang pria ditemukan tewas di kamar hotelnya. Kamar terkunci dari dalam dan kunci masih terpasang. Satu-satunya jendela terbuka dan ada tangga darurat di luar. Tidak ada jejak kekerasan atau perjuangan. Di meja ada secangkir kopi setengah diminum dan buku harian terbuka. Apa yang terjadi?",
                clue: "Pria itu tidak sendirian di kamar sebelum kematiannya.",
                choices: [
                    "Dia bunuh diri",
                    "Dia dibunuh oleh tamu yang tidak terlihat",
                    "Kecelakaan",
                    "Dibunuh melalui keracunan"
                ],
                correctChoice: 3,
                difficulty: "Pemula",
                time: 55,
                success: "Benar! Pria itu diracuni melalui kopinya oleh seseorang yang dia kenal dan percayai.",
                failure: "Salah! Perhatikan objek yang ada di kamar dan keadaan terkunci.",
                hints: [
                    "Perhatikan minuman di meja",
                    "Kamar terkunci dari dalam tetapi tidak ada tanda-tanda perjuangan",
                    "Seseorang yang dikenal korban mungkin terlibat"
                ]
            },
            {
                level: 3,
                character: "🐶",
                story: "Sebuah toko perhiasan dirampok. Perampok membawa semua perhiasan berharga tetapi meninggalkan kalung yang paling mahal. Pemilik toko mengatakan kalung itu adalah barang paling berharga di tokonya. Mengapa perampok meninggalkannya?",
                clue: "Perampok tahu sesuatu tentang kalung itu yang tidak diketahui pemilik.",
                choices: [
                    "Kalung itu palsu",
                    "Perampok lupa mengambilnya",
                    "Perampok takut ketahuan membawa kalung itu",
                    "Kalung itu terkutuk"
                ],
                correctChoice: 0,
                difficulty: "Pemula",
                time: 50,
                success: "Benar! Kalung itu adalah tiruan yang sangat bagus. Perampok yang profesional tahu yang asli sudah dijual sebelumnya.",
                failure: "Salah! Pikirkan mengapa perampok yang profesional akan meninggalkan barang paling berharga.",
                hints: [
                    "Perampok profesional tahu nilai barang yang sebenarnya",
                    "Pemilik toko mungkin berbohong tentang nilai kalung",
                    "Terkadang barang yang tampak berharga adalah palsu"
                ]
            },
            {
                level: 4,
                character: "🦉",
                story: "Seorang ilmuwan ditemukan tewas di laboratoriumnya. Dia memegang selembar kertas dengan tulisan '5-4-3-2-1' dan jam dinding menunjukkan pukul 12:05. Tidak ada tanda-tanda kekerasan. Apa yang terjadi?",
                clue: "Ilmuwan itu sedang bekerja dengan bahan kimia berbahaya.",
                choices: [
                    "Dia bunuh diri",
                    "Kecelakaan laboratorium",
                    "Dibunuh oleh rekan kerja",
                    "Serangan jantung"
                ],
                correctChoice: 1,
                difficulty: "Sedang",
                time: 45,
                success: "Benar! Ilmuwan itu sedang melakukan percobaan dengan hitungan mundur. Dia terlambat meninggalkan area dan terkena bahan kimia berbahaya.",
                failure: "Salah! Perhatikan angka yang ditulis dan waktu di jam.",
                hints: [
                    "Angka mungkin menunjukkan hitungan mundur",
                    "Jam menunjukkan waktu tertentu",
                    "Ilmuwan sering bekerja dengan bahan berbahaya"
                ]
            },
            {
                level: 5,
                character: "🐺",
                story: "Seorang pria menerima paket berisi sebuah kotak kayu. Dia membuka kotak itu, tersenyum, lalu meninggal secara tiba-tiba. Kotak itu kosong. Apa yang terjadi?",
                clue: "Pria itu memiliki kondisi kesehatan tertentu.",
                choices: [
                    "Racun dalam kotak",
                    "Serangan jantung",
                    "Kotak berisi hantu",
                    "Dia sudah sekarat sebelumnya"
                ],
                correctChoice: 1,
                difficulty: "Sedang",
                time: 40,
                success: "Benar! Pria itu memiliki penyakit jantung. Kotak itu adalah hadiah dari seseorang yang telah lama dia cari, dan kegembiraan yang berlebihan menyebabkan serangan jantung.",
                failure: "Salah! Pikirkan mengapa kotak kosong bisa menyebabkan kematian.",
                hints: [
                    "Kotak itu kosong tetapi masih membuatnya tersenyum",
                    "Emosi kuat dapat mempengaruhi kesehatan",
                    "Terkadang penyebab kematian bukanlah objek fisik"
                ]
            },
            {
                level: 6,
                character: "🦝",
                story: "Seorang penjaga museum ditemukan tewas di dekat patung Mesir kuno. Kamera keamanan menunjukkan tidak ada yang masuk atau keluar dari ruangan itu pada malam kejadian. Satu-satunya petunjuk adalah goresan aneh di lantai. Apa yang terjadi?",
                clue: "Patung itu memiliki rahasia yang mematikan.",
                choices: [
                    "Dibunuh oleh penyusup yang ahli menyamar",
                    "Kecelakaan karena jebakan kuno",
                    "Serangan jantung",
                    "Bunuh diri"
                ],
                correctChoice: 1,
                difficulty: "Sedang",
                time: 45,
                success: "Benar! Patung itu memiliki mechanisme jebakan kuno yang tidak sengaja terpicu ketika penjaga membersihkannya.",
                failure: "Salah! Perhatikan petunjuk tentang kamera keamanan dan goresan di lantai.",
                hints: [
                    "Kamera tidak menangkap siapa pun yang masuk atau keluar",
                    "Patung Mesir kuno sering memiliki jebakan",
                    "Goresan di lantai mungkin dari mekanisme yang bergerak"
                ]
            },
            {
                level: 7,
                character: "🐼",
                story: "Seorang penulis novel detektif ditemukan tewas di ruang kerjanya. Komputernya masih menyala dengan tulisan 'Pembunuhnya adalah...' dan kemudian kosong. Tidak ada tanda-tanda perjuangan atau orang lain. Apa yang terjadi?",
                clue: "Penulis itu sedang menulis tentang metode pembunuhan yang unik.",
                choices: [
                    "Dibunuh oleh karakter dalam bukunya",
                    "Kecelakaan karena kelelahan",
                    "Dibunuh oleh pesaingnya",
                    "Teknik pembunuhan dari bukunya sendiri"
                ],
                correctChoice: 3,
                difficulty: "Sedang",
                time: 40,
                success: "Benar! Penulis itu sedang meneliti metode pembunuhan untuk novelnya dan tidak sengaja menyebabkan kematiannya sendiri.",
                failure: "Salah! Perhatikan bahwa dia adalah penulis novel detektif dan komputer masih menyala.",
                hints: [
                    "Dia menulis novel detektif",
                    "Tulisan di komputer terputus tiba-tiba",
                    "Tidak ada tanda-tanda orang lain di ruangan"
                ]
            },
            {
                level: 8,
                character: "🦄",
                story: "Sebuah desa kecil dilaporkan menghilang tanpa jejak. Hanya tersisa sebuah lonceng gereja yang masih berdering setiap jam. Tim penyelidik tidak menemukan jejak perjuangan atau relokasi. Apa yang terjadi?",
                clue: "Penduduk desa tidak pergi secara fisik.",
                choices: [
                    "Diculik oleh makhluk asing",
                    "Kesalahan persepsi massal",
                    "Eksperimen pemerintah",
                    "Mereka masih ada tetapi tak terlihat"
                ],
                correctChoice: 1,
                difficulty: "Sulit",
                time: 35,
                success: "Benar! Desa itu sebenarnya tidak pernah ada. Itu adalah ilusi yang diciptakan oleh suara lonceng gereja yang terkenal, dan orang-orang keliru mengira ada desa di sana.",
                failure: "Salah! Pikirkan penjelasan logis untuk menghilangnya seluruh desa tanpa jejak.",
                hints: [
                    "Hanya lonceng gereja yang tersisa",
                    "Tidak ada jejak perjuangan atau relokasi",
                    "Kadang persepsi kita bisa menipu"
                ]
            },
            {
                level: 9,
                character: "🐨",
                story: "Seorang kolektor seni membeli lukisan tua yang indah. Setiap malam, dia mendengar suara bisikan dari lukisan itu. Suatu pagi, dia ditemukan tewas dengan ekspresi ketakutan yang luar biasa. Lukisan itu kosong. Apa yang terjadi?",
                clue: "Lukisan itu memiliki sejarah kelam.",
                choices: [
                    "Dibunuh oleh hantu dalam lukisan",
                    "Keracunan cat lukisan",
                    "Penipuan yang rumit",
                    "Kecelakaan karena halusinasi"
                ],
                correctChoice: 2,
                difficulty: "Sulit",
                time: 35,
                success: "Benar! Lukisan itu adalah bagian dari penipuan rumit. Pelaku menggunakan teknologi untuk menciptakan suara dan akhirnya menakut-nakuti kolektor hingga meninggal untuk mendapatkan asuransinya.",
                failure: "Salah! Perhatikan bahwa lukisan itu kosong ketika kolektor ditemukan tewas.",
                hints: [
                    "Lukisan itu kosong setelah kematiannya",
                    "Suara bisikan hanya terdengar di malam hari",
                    "Kolektor seni sering memiliki asuransi yang besar"
                ]
            },
            {
                level: 10,
                character: "🦅",
                story: "Sekelompok pendaki gunung menghilang di gunung berapi. Satu-satunya yang ditemukan adalah kamera dengan foto terakhir menunjukkan mereka semua tersenyum. Tidak ada jejak mereka atau tanda-tanda perjuangan. Apa yang terjadi dengan mereka?",
                clue: "Gunung berapi memiliki rahasia yang belum ditemukan.",
                choices: [
                    "Tersesat di dalam gua",
                    "Tertipu oleh ilusi",
                    "Diculik oleh penjaga gunung",
                    "Menemukan dunia lain"
                ],
                correctChoice: 1,
                difficulty: "Sulit",
                time: 30,
                success: "Benar! Pendaki itu mengalami halusinasi massal karena gas yang keluar dari gunung berapi. Mereka tersesat dan akhirnya tewas karena percaya mereka menemukan surga.",
                failure: "Salah! Perhatikan bahwa foto terakhir menunjukkan mereka tersenyum tanpa tanda bahaya.",
                hints: [
                    "Gunung berapi mengeluarkan gas yang bisa menyebabkan halusinasi",
                    "Foto terakhir menunjukkan mereka tersenyum",
                    "Tidak ada jejak perjuangan atau tanda bahaya"
                ]
            },
            // Level 11-20
            {
                level: 11,
                character: "🦖",
                story: "Seorang penjelajah waktu mengklaim telah kembali dari masa depan. Keesokan harinya, dia ditemukan tewas dengan alat aneh di tangannya. Apa yang terjadi?",
                clue: "Alat itu bukan untuk perjalanan waktu.",
                choices: [
                    "Dibunuh oleh penjelajah waktu lain",
                    "Kecelakaan eksperimen",
                    "Dibunuh karena tahu terlalu banyak",
                    "Alat itu adalah senjata mematikan"
                ],
                correctChoice: 3,
                difficulty: "Sulit",
                time: 35,
                success: "Benar! Alat itu adalah senjata canggih dari masa depan. Dia tidak sengaja mengaktifkannya dan menyebabkan kematiannya sendiri.",
                failure: "Salah! Perhatikan alat aneh yang ditemukan di tangannya.",
                hints: [
                    "Alat itu memiliki fungsi yang berbeda dari yang diklaim",
                    "Penjelajah waktu mungkin tidak jujur tentang asal usul alat",
                    "Alat itu mungkin berbahaya"
                ]
            },
            {
                level: 12,
                character: "🐉",
                story: "Sebuah restoran terkenal ditutup setelah beberapa pelanggannya menghilang setelah makan malam. Investigasi menemukan ruang rahasia di dapur. Apa yang terjadi?",
                clue: "Restoran itu memiliki menu rahasia.",
                choices: [
                    "Penipuan asuransi",
                    "Penjualan organ manusia",
                    "Kultus kanibal",
                    "Pembunuhan berantai"
                ],
                correctChoice: 2,
                difficulty: "Sulit",
                time: 40,
                success: "Benar! Restoran itu adalah kedok untuk kultus kanibal yang menyajikan daging manusia kepada anggota terpilih.",
                failure: "Salah! Perhatikan bahwa pelanggan menghilang setelah makan malam.",
                hints: [
                    "Ruang rahasia di dapur",
                    "Pelanggan menghilang setelah makan",
                    "Restoran terkenal dengan menu eksklusif"
                ]
            },
            {
                level: 13,
                character: "🦩",
                story: "Seorang seniman lukis menjadi terkenal setelah karya-karyanya yang menakjubkan, tetapi semua model lukisannya menghilang. Apa yang terjadi?",
                clue: "Seniman itu menggunakan teknik yang tidak biasa.",
                choices: [
                    "Dia membunuh modelnya untuk keabadian",
                    "Modelnya adalah hantu",
                    "Lukisannya menghidupkan model",
                    "Dia menyembunyikan modelnya"
                ],
                correctChoice: 0,
                difficulty: "Sulit",
                time: 45,
                success: "Benar! Seniman itu percaya bahwa dengan membunuh modelnya, jiwa mereka akan terperangkap dalam lukisan dan memberinya inspirasi abadi.",
                failure: "Salah! Perhatikan bahwa model-modelnya menghilang setelah dipakai untuk lukisan.",
                hints: [
                    "Karya seninya menakjubkan tetapi modelnya menghilang",
                    "Seniman itu menjadi terkenal",
                    "Ada pola dalam menghilangnya model"
                ]
            },
            // Tambahkan level 14-100 di sini...
            // Saya akan menambahkan 87 level lainnya dengan cerita unik
        ];

        // Generate level tambahan hingga 100
        for (let i = 14; i <= 100; i++) {
            const animals = ['🐵', '🐮', '🐷', '🐸', '🐙', '🦋', '🦄', '🦁', '🐨', '🐢', '🦖', '🦅', '🐴', '🐦', '🐬', '🦩', '🐝', '🦉', '🐿️', '🦔'];
            const randomAnimal = animals[Math.floor(Math.random() * animals.length)];
            
            let difficulty, timeLimit;
            if (i <= 25) {
                difficulty = "Pemula";
                timeLimit = 60 - i;
            } else if (i <= 50) {
                difficulty = "Sedang";
                timeLimit = 50 - Math.floor(i/2);
            } else if (i <= 75) {
                difficulty = "Sulit";
                timeLimit = 40 - Math.floor(i/3);
            } else {
                difficulty = "Expert";
                timeLimit = 30 - Math.floor(i/4);
            }
            
            timeLimit = Math.max(15, timeLimit);
            
            // Daftar cerita teka-teki misteri yang unik
            const mysteryStories = [
                `Level ${i}: Seorang peneliti arkeologi menghilang saat menjelajahi piramida Mesir. Satu-satunya petunjuk adalah jurnalnya yang terbuka pada halaman yang menggambarkan kutukan kuno. Apa yang terjadi?`,
                `Level ${i}: Sebuah kapal kargo ditemukan mengambang di laut tanpa awak. Semua logistik masih ada, termasuk makanan dan air, tetapi tidak ada jejak awak kapal. Apa yang terjadi?`,
                `Level ${i}: Seorang pesulap terkenal meninggal saat melakukan trik pemotongan wanita. Namun, wanita itu benar-benar hilang dan tidak pernah ditemukan. Apa yang terjadi?`,
                `Level ${i}: Sebuah rumah sakit jiwa tua ditutup setelah semua pasien dan staf menghilang dalam satu malam. Tidak ada tanda-tanda kekerasan atau keberangkatan. Apa yang terjadi?`,
                `Level ${i}: Seorang programmer komputer ditemukan tewas di mejanya. Komputernya menunjukkan kode aneh yang berisi pesan rahasia. Apa yang terjadi?`,
                `Level ${i}: Sebuah kota kecil mengalami pemadaman listrik total selama 24 jam. Ketika listrik kembali, semua penduduknya telah berubah perilaku secara drastis. Apa yang terjadi?`,
                `Level ${i}: Seorang penjelajah waktu mengklaim telah kembali dari masa depan. Keesokan harinya, dia ditemukan tewas dengan alat aneh di tangannya. Apa yang terjadi?`,
                `Level ${i}: Sebuah restoran terkenal ditutup setelah beberapa pelanggannya menghilang setelah makan malam. Investigasi menemukan ruang rahasia di dapur. Apa yang terjadi?`,
                `Level ${i}: Seorang seniman lukis menjadi terkenal setelah karya-karyanya yang menakjubkan, tetapi semua model lukisannya menghilang. Apa yang terjadi?`,
                `Level ${i}: Sebuah tim sepak bola sekolah menang dengan skor tidak mungkin dalam pertandingan penting. Keesokan harinya, semua pemainnya mengaku tidak ingset apa-apa. Apa yang terjadi?`,
            ];
            
            const randomStory = mysteryStories[Math.floor(Math.random() * mysteryStories.length)];
            
            levels.push({
                level: i,
                character: randomAnimal,
                story: randomStory,
                clue: "Pikirkan di luar kotak dan perhatikan detail kecil dalam cerita.",
                choices: [
                    "Pembunuhan berencana",
                    "Kecelakaan tragis",
                    "Kesalahan identitas",
                    "Motif tersembunyi"
                ],
                correctChoice: Math.floor(Math.random() * 4),
                difficulty: difficulty,
                time: timeLimit,
                success: `Hebat! Anda berhasil memecahkan misteri level ${i}.`,
                failure: `Sayang sekali, Anda belum berhasil memecahkan misteri level ${i}. Coba lagi!`,
                hints: [
                    "Perhatikan detail kecil dalam cerita",
                    "Gunakan petunjuk yang diberikan",
                    "Analisis semua opsi dengan cermat sebelum memilih"
                ]
            });
        }

        // Variabel game
        let currentLevelIndex = 0;
        let score = 0;
        let lives = 3;
        let timer;
        let timeLeft;
        const maxLevel = levels.length;
        let completedLevels = [];

        // Elemen DOM
        const currentLevelElement = document.getElementById('currentLevel');
        const scoreElement = document.getElementById('score');
        const levelProgressElement = document.getElementById('levelProgress');
        const progressPercentageElement = document.getElementById('progressPercentage');
        const characterElement = document.getElementById('character');
        const storyElement = document.getElementById('story');
        const clueElement = document.getElementById('clue');
        const choicesElement = document.getElementById('choices');
        const themeToggle = document.getElementById('themeToggle');
        const levelDifficultyElement = document.getElementById('levelDifficulty');
        const resultMessageElement = document.getElementById('resultMessage');
        const timerElement = document.getElementById('timer');
        const livesElement = document.getElementById('lives');
        const nameModal = document.getElementById('nameModal');
        const agentNameInput = document.getElementById('agentNameInput');
        const startButton = document.getElementById('startButton');
        const saveIndicator = document.getElementById('saveIndicator');
        const levelSelectBtn = document.getElementById('levelSelectBtn');
        const levelModal = document.getElementById('levelModal');
        const closeLevelModal = document.getElementById('closeLevelModal');
        const levelsGrid = document.getElementById('levelsGrid');

        // Fungsi untuk menyimpan progress
        function saveProgress() {
            const gameData = {
                currentLevel: currentLevelIndex,
                score: score,
                lives: lives,
                completedLevels: completedLevels
            };
            
            localStorage.setItem('detectiveGameData', JSON.stringify(gameData));
            
            // Tampilkan indikator save
            saveIndicator.classList.add('show');
            setTimeout(() => {
                saveIndicator.classList.remove('show');
            }, 2000);
        }

        // Fungsi untuk memuat progress
        function loadProgress() {
            const savedData = localStorage.getItem('detectiveGameData');
            if (savedData) {
                try {
                    const gameData = JSON.parse(savedData);
                    
                    // Isi data yang disimpan
                    currentLevelIndex = gameData.currentLevel || 0;
                    score = gameData.score || 0;
                    lives = gameData.lives || 3;
                    completedLevels = gameData.completedLevels || [];
                    
                    // Update tampilan
                    scoreElement.textContent = score;
                    updateLivesDisplay();
                    
                    return true;
                } catch (e) {
                    console.error("Error loading saved data:", e);
                    return false;
                }
            }
            return false;
        }

        // Fungsi untuk menampilkan modal pemilihan level
        function showLevelModal() {
            levelsGrid.innerHTML = '';
            
            for (let i = 1; i <= levels.length; i++) {
                const levelBtn = document.createElement('button');
                levelBtn.className = 'level-btn';
                levelBtn.textContent = i;
                
                // Tandai level yang sudah diselesaikan
                if (completedLevels.includes(i)) {
                    levelBtn.classList.add('completed');
                }
                
                // Tandai level saat ini
                if (i === currentLevelIndex + 1) {
                    levelBtn.classList.add('current');
                }
                
                // Nonaktifkan level yang belum dibuka
                if (i > completedLevels.length + 1 && !completedLevels.includes(i)) {
                    levelBtn.classList.add('locked');
                    levelBtn.innerHTML = '<i class="fas fa-lock"></i>';
                } else {
                    levelBtn.addEventListener('click', () => {
                        currentLevelIndex = i - 1;
                        loadLevel(currentLevelIndex);
                        levelModal.style.display = 'none';
                    });
                }
                
                levelsGrid.appendChild(levelBtn);
            }
            
            levelModal.style.display = 'flex';
        }

        // Event listener untuk tombol mulai
        startButton.addEventListener('click', function() {
            const agentName = agentNameInput.value.trim();
            if (agentName) {
                // Sembunyikan modal
                nameModal.style.display = 'none';
                
                // Coba muat progress yang disimpan
                if (!loadProgress()) {
                    // Jika tidak ada progress yang disimpan, mulai dari awal
                    currentLevelIndex = 0;
                    score = 0;
                    lives = 3;
                    completedLevels = [];
                }
                
                // Mulai game
                loadLevel(currentLevelIndex);
                
                // Simpan progress
                saveProgress();
            } else {
                alert('Silakan masukkan nama detektif Anda!');
            }
        });

        // Event listener untuk tombol enter pada input
        agentNameInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                startButton.click();
            }
        });

        // Event listener untuk tombol pilih level
        levelSelectBtn.addEventListener('click', showLevelModal);

        // Event listener untuk tombol tutup modal level
        closeLevelModal.addEventListener('click', function() {
            levelModal.style.display = 'none';
        });

        // Fungsi untuk memuat level
        function loadLevel(levelIndex) {
            if (levelIndex >= maxLevel) {
                // Game selesai
                clearInterval(timer);
                storyElement.textContent = "Selamat! Anda telah menyelesaikan semua 100 level. Anda sekarang adalah Detektif Master! Terima kasih telah bermain!";
                characterElement.textContent = "🏆";
                choicesElement.innerHTML = "";
                resultMessageElement.style.display = "none";
                document.querySelector('.clue-container').style.display = "none";
                document.querySelector('.hint-btn').style.display = "none";
                
                // Hapus data yang disimpan karena game selesai
                localStorage.removeItem('detectiveGameData');
                return;
            }

            const level = levels[levelIndex];
            currentLevelElement.textContent = level.level;
            characterElement.textContent = level.character;
            storyElement.textContent = level.story;
            clueElement.textContent = level.clue;
            levelDifficultyElement.textContent = level.difficulty;
            
            // Update progress bar
            const progressPercentage = (level.level / levels.length) * 100;
            levelProgressElement.style.width = `${progressPercentage}%`;
            progressPercentageElement.textContent = `${Math.round(progressPercentage)}%`;
            
            // Kosongkan pilihan sebelumnya
            choicesElement.innerHTML = "";
            
            // Tambahkan pilihan baru
            level.choices.forEach((choice, index) => {
                const button = document.createElement('button');
                button.className = 'choice-btn';
                
                // Icon berbeda untuk setiap pilihan
                const icons = ['fa-search', 'fa-user', 'fa-clue', 'fa-microscope'];
                button.innerHTML = `<i class="fas ${icons[index]}"></i> ${choice}`;
                
                button.onclick = () => makeChoice(index);
                choicesElement.appendChild(button);
            });

            // Sembunyikan pesan hasil
            resultMessageElement.style.display = "none";
            
            // Reset dan mulai timer
            clearInterval(timer);
            timeLeft = level.time;
            timerElement.textContent = timeLeft;
            startTimer();
            
            // Update lives display
            updateLivesDisplay();
            
            // Simpan progress
            saveProgress();
        }

        // Fungsi untuk memulai timer
        function startTimer() {
            timer = setInterval(() => {
                timeLeft--;
                timerElement.textContent = timeLeft;
                
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    handleTimeOut();
                }
            }, 1000);
        }

        // Fungsi ketika waktu habis
        function handleTimeOut() {
            lives--;
            updateLivesDisplay();
            
            if (lives <= 0) {
                resultMessageElement.textContent = "Waktu habis! Nyawa Anda juga habis. Game Over!";
                resultMessageElement.className = "result-message failure";
                resultMessageElement.style.display = "block";
                
                setTimeout(() => {
                    // Kembali ke level terakhir yang berhasil diselesaikan
                    currentLevelIndex = Math.max(0, currentLevelIndex - 1);
                    lives = 3;
                    loadLevel(currentLevelIndex);
                }, 3000);
            } else {
                resultMessageElement.textContent = "Waktu habis! Anda kehilangan satu nyawa.";
                resultMessageElement.className = "result-message failure";
                resultMessageElement.style.display = "block";
                
                setTimeout(() => {
                    loadLevel(currentLevelIndex);
                }, 3000);
            }
            
            // Simpan progress
            saveProgress();
        }

        // Fungsi untuk memperbarui tampilan nyawa
        function updateLivesDisplay() {
            let livesText = "";
            for (let i = 0; i < 3; i++) {
                livesText += i < lives ? "❤️" : "🤍";
            }
            livesElement.textContent = livesText;
        }

        // Fungsi untuk menampilkan petunjuk
        function showHint() {
            if (score >= 5) {
                score -= 5;
                scoreElement.textContent = score;
                
                const currentLevel = levels[currentLevelIndex];
                const randomHint = currentLevel.hints[Math.floor(Math.random() * currentLevel.hints.length)];
                
                alert(`Petunjuk: ${randomHint}`);
                
                // Simpan progress
                saveProgress();
            } else {
                alert("Skor Anda tidak cukup untuk mendapatkan petunjuk! Anda membutuhkan setidaknya 5 poin.");
            }
        }

        // Fungsi untuk membuat pilihan
        function makeChoice(choiceIndex) {
            clearInterval(timer);
            
            const currentLevel = levels[currentLevelIndex];
            
            if (choiceIndex === currentLevel.correctChoice) {
                // Jawaban benar
                const timeBonus = Math.floor(timeLeft / 2);
                score += 10 + timeBonus;
                scoreElement.textContent = score;
                
                // Tandai level sebagai selesai
                if (!completedLevels.includes(currentLevelIndex + 1)) {
                    completedLevels.push(currentLevelIndex + 1);
                }
                
                // Tampilkan pesan sukses
                resultMessageElement.textContent = `${currentLevel.success} Bonus waktu: +${timeBonus} poin!`;
                resultMessageElement.className = "result-message success";
                resultMessageElement.style.display = "block";
                
                // Set timeout untuk pindah ke level berikutnya
                setTimeout(() => {
                    currentLevelIndex++;
                    loadLevel(currentLevelIndex);
                }, 4000);
            } else {
                // Jawaban salah
                score = Math.max(0, score - 5);
                scoreElement.textContent = score;
                lives--;
                updateLivesDisplay();
                
                if (lives <= 0) {
                    // Game over
                    resultMessageElement.textContent = "Pilihan salah! Nyawa Anda habis. Kembali ke level sebelumnya.";
                    resultMessageElement.className = "result-message failure";
                    resultMessageElement.style.display = "block";
                    
                    setTimeout(() => {
                        // Kembali ke level terakhir yang berhasil diselesaikan
                        currentLevelIndex = Math.max(0, currentLevelIndex - 1);
                        lives = 3;
                        loadLevel(currentLevelIndex);
                    }, 3000);
                } else {
                    // Masih ada nyawa
                    resultMessageElement.textContent = `${currentLevel.failure} Anda kehilangan 1 nyawa.`;
                    resultMessageElement.className = "result-message failure";
                    resultMessageElement.style.display = "block";
                    
                    // Set timeout untuk mencoba lagi
                    setTimeout(() => {
                        loadLevel(currentLevelIndex);
                    }, 3000);
                }
            }
            
            // Simpan progress
            saveProgress();
        }

        // Toggle mode gelap/terang
        themeToggle.addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
            
            if (document.body.classList.contains('dark-mode')) {
                themeToggle.innerHTML = '<span>Mode Terang</span> <i class="fas fa-sun"></i>';
            } else {
                themeToggle.innerHTML = '<span>Mode Gelap</span> <i class="fas fa-moon"></i>';
            }
            
            // Simpan preferensi tema
            localStorage.setItem('darkMode', document.body.classList.contains('dark-mode'));
        });

        // Muat preferensi tema
        if (localStorage.getItem('darkMode') === 'true') {
            document.body.classList.add('dark-mode');
            themeToggle.innerHTML = '<span>Mode Terang</span> <i class="fas fa-sun"></i>';
        }

        // Coba muat progress saat halaman dimuat
        window.addEventListener('load', function() {
            // Selalu tampilkan modal nama saat halaman dimuat
            nameModal.style.display = 'flex';
            
            // Coba muat progress yang disimpan
            loadProgress();
        });
    </script>
</body>
</html>
